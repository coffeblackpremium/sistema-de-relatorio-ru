{% extends 'index.html' %}
{% load static%}
{% block title %} üìã Tabelas {% endblock %}
{% block content %}
<div class="container rounded">

  <table class="table table-stripped shadow-lg rounded" id="table-action">
    <thead class="thead-dark">
      <h2 class="text-center my-4">Registro Unificado de A√ß√µes</h2>
      <tr>
        <th scope="col">ID</th>
        <th scope="col">Tipo de Registro</th>
        <th scope="col">Tecnico n√£o Presencial</th>
        <th scope="col">Tecnico Presencial</th>
        <th scope="col">Outras A√ß√µes</th>
        <th scope="col">Num. de Funcionarios</th>
        <th scope="col">Descri√ß√£o</th>
        <th scope="col">Data A√ß√£o</th>
      </tr>
    </thead>
    <tbody>
      {% for table in table_action_page_object %}
      <tr>
        <th scope="row" id="table-action-id">{{table.id}}</th>
        <td>{{table.acao_realizada}}</td>
        <td>{{table.tecnico_nao_presencial}}</td>
        <td>{{table.tecnico_presencial}}</td>
        <td>{{table.outras_acoes}}</td>
        <td>{{table.numbers_employee}}</td>

        <td><a href="{% url 'description_table' id=table.id %}" class="text-decoration-none">Visualizar
          </a></td>
        <td>{{table.date_actions}}</td>
        <form action="{% url 'deleteTableAction' id=table.id %}" method="POST">
          {% csrf_token %}
          <td><button type="submit" class="btn btn-danger" confirm="Deseja apagar ?"><i
                class="fa-solid fa-trash"></i></button></td>
        </form>
        <td><a href="{% url 'tableActionUpdate' id=table.id%}">

            <button type="button" class="btn btn-info">
              <i class="fas fa-edit"></i>
            </button>
          </a>
        </td>
      </tr>
      {% endfor %}

    </tbody>
  </table>
  {% if table_action_page_object.paginator.num_pages > 1 %}
  <nav aria-label="Page navigation">
    <ul class="pagination justify-content-center">
      {% if table_action_page_object.paginator.num_pages != 1 %}
      <li class="page-item"><a class="page-link" href="?page_action=1">First</a></li>
      {% else %}
      <li class="page-item disabled"><a class="page-link" href="#">First</a></li>
      {% endif %}
      {% if table_action_page_object.has_previous %}
      <li class="page-item"><a class="page-link"
          href="?page_action={{ table_action_page_object.previous_page_number }}">&laquo;</a></li>
      {% else %}
      <li class="page-item disabled"><a class="page-link" href="#">&laquo;</a></li>
      {% endif %}
      {% for i in table_action_page_object.paginator.page_range %}
      {% if table_action_page_object.number == i %}
      <li class="page-item active"><a class="page-link" href="#">{{ i }} <span class="sr-only">(current)</span></a></li>
      {% elif table_action_page_object.number > i|add:"-5" and table_action_page_object.number < i|add:"+5"%} <li
        class="page-item"><a class="page-link" href="?page_action={{ i }}">{{ i }}</a></li>
        {% endif %}
        {% endfor %}
        {% if table_action_page_object.has_next %}
        <li class="page-item"><a class="page-link"
            href="?page_action={{ table_action_page_object.next_page_number }}">&raquo;</a></li>
        {% else %}
        <li class="page-item disabled"><a class="page-link" href="#">&raquo;</a></li>
        {% endif %}
        {% if table_action_page_object.paginator.num_pages != table_action_page_object.number %}
        <li class="page-item"><a class="page-link"
            href="?page_action={{ table_action_page_object.paginator.num_pages }}">Last</a></li>
        {% else %}
        <li class="page-item disabled"><a class="page-link" href="#">Last</a></li>
        {% endif %}
    </ul>
  </nav>
  {% endif %}
</div>

<div class="container rounded">
  <table class="table shadow-lg rounded">
    <thead class="thead-dark">
      <h2 class="text-center my-5">Registro Unificado de Eventos</h2>
      <tr>
        <th scope="col">ID</th>
        <th scope="col">Nome do Evento</th>
        <th scope="col">Tipo do Evento</th>
      </tr>
    </thead>
    <tbody>
      {% for table in table_event_page_object %}
      <tr>
        <th scope="row">{{table.id}}</th>
        <td>{{table.title_event}}</td>
        <td>{{table.event_feature}}</td>
        <form method="post" action="{% url 'deleteTableEvent' id=table.id %}">
          {% csrf_token %}
          <a href="{% url 'deleteTableEvent' id=table.id %}" id="delete-item">
            <td><button type="submit" class="btn btn-danger">
                <i class="fa-solid fa-trash"></i>
              </button></td>
          </a>
        </form>
        <td><a href="{% url 'tableEventUpdate' id=table.id%}">
            <button type="button" class="btn btn-info">
              <i class="fas fa-edit"></i>
            </button>

          </a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% if table_event_page_object.paginator.num_pages > 1 %}
  <nav aria-label="Page navigation">
    <ul class="pagination justify-content-center">
      {% if table_event_page_object.paginator.num_pages != 1 %}
      <li class="page-item"><a class="page-link" href="?page_event=1">First</a></li>
      {% else %}
      <li class="page-item disabled"><a class="page-link" href="#">First</a></li>
      {% endif %}
      {% if table_event_page_object.has_previous %}
      <li class="page-item"><a class="page-link"
          href="?page_event={{ table_event_page_object.previous_page_number }}">&laquo;</a></li>
      {% else %}
      <li class="page-item disabled"><a class="page-link" href="#">&laquo;</a></li>
      {% endif %}
      {% for i in table_event_page_object.paginator.page_range %}
      {% if table_event_page_object.number == i %}
      <li class="page-item active"><a class="page-link" href="#">{{ i }} <span class="sr-only">(current)</span></a></li>
      {% elif table_event_page_object.number > i|add:"-5" and table_event_page_object.number < i|add:"+5"%} <li
        class="page-item"><a class="page-link" href="?page_event={{ i }}">{{ i }}</a></li>
        {% endif %}
        {% endfor %}
        {% if table_event_page_object.has_next %}
        <li class="page-item"><a class="page-link"
            href="?page_event={{ table_event_page_object.next_page_number }}">&raquo;</a></li>
        {% else %}
        <li class="page-item disabled"><a class="page-link" href="#">&raquo;</a></li>
        {% endif %}
        {% if table_event_page_object.paginator.num_pages != table_event_page_object.number %}
        <li class="page-item"><a class="page-link"
            href="?page_event={{ table_event_page_object.paginator.num_pages }}">Last</a></li>
        {% else %}
        <li class="page-item disabled"><a class="page-link" href="#">Last</a></li>
        {% endif %}
    </ul>
  </nav>
  {% endif %}
</div>

<!-- Modal -->
<div class="modal fade" id="tableActionModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Descri√ß√£o</h5>
      </div>
      <div class="modal-body">

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal" id="buttonClose">Fechar Descri√ß√£o</button>
      </div>
    </div>
  </div>
</div>
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
  crossorigin="anonymous"></script>
<script type='text/javascript'>
  $(document).ready(function () {
    // Close modal on button click
    $(".btn").click(function () {
      $("#tableActionModal").modal('hide');
    });
  });
</script>
{% endblock %}